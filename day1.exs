defmodule DayOne do
  def elements(string) do
    string
    |> String.codepoints
    |> Enum.map(&String.to_integer/1)
  end
end

defmodule DayOnePartOne do
  def process(string) do
    string
    |> IO.inspect
    |> DayOne.elements
    |> addlast
    |> filter
    |> Enum.sum
    |> IO.inspect
  end

  defp addlast([head | tail]) do
    [head] ++ tail ++ [head]
  end

  defp filter([]) do
    []
  end
  defp filter([_]) do
    []
  end
  defp filter([one, one]) do
    [one]
  end
  defp filter([one, two]) do
    []
  end
  defp filter([one, one | tail]) do
    [one] ++ filter([one] ++ tail)
  end
  defp filter([one, two | tail]) do
    filter([two] ++ tail)
  end
end

defmodule DayOnePartTwo do
  def process(string) do
    string
    |> IO.inspect
    |> DayOne.elements
    |> filter
    |> IO.inspect
    |> Enum.sum
    |> IO.inspect
  end

  defp filter(elms) do
    len = length(elms)
    dist = round(len / 2)
    determine(len, dist, 0, elms)
  end

  defp determine(len, dist, pos, elms) when pos < len and pos + dist < len do
    one = Enum.at(elms, pos)
    two = Enum.at(elms, pos + dist)
    case one do
      two ->
        [one] ++ determine(len, dist, pos + 1, elms)
      _ ->
        determine(len, dist, pos + 1, elms)
    end
  end
  defp determine(len, dist, pos, elms) when pos < len and pos + dist >= len do
    []
  end
  defp determine(len, dist, pos, elms) when pos >= len do
    []
  end
end

#DayOnePartOne.process("1122")
#DayOnePartOne.process("1111")
#DayOnePartOne.process("1234")
#DayOnePartOne.process("91212129")
#DayOnePartOne.process("892195969991735837915273868729548694237967495115412399373194562526947585337233793568278265279199883197167634791293177986152566236718332617536487236879747167999983363832257912445756887314879229925864477761357139855548522513798899853896612387146687716264599943289416326727256525173953861534244979466587895429399159924916364476319573895566795393368411672387263615582128377676293612892723762237191146714286233543514411813323197995953854871628225358543514157867372265718724276911699514971458844849349726276329135118243155698271218844347387457343656446381799296893222256198484465873714311777937421161581798189554141474236239447612421883232173914183732126332838194648583472419154369952477422666389517569944428464617457124369349242479612422673241361777576466946622932243728551273284837934497511114334421486262244982914734452113946361245377351849815584855691778894798219822463298387771923329337634394654439458564233259451453345316753241438267739439225497515276522424441532462541528195782818326918562247278496495764435386667383577543385186827269732261223156824351164841648424564925198783625721396988984481558391866483955533972212164693898955412719161648411279149413443192896864258215498543827458438871355879336892721675937111952479183496982825163456282747678364612135596373533447719867384667516572262124225585623974278833981365494628646614588114147473559138853453189448624976774641922469183942857695986376428944876851497914443873513862319484181787593572987444669767939526294424531262999564948571142342741129862311311313166798363442745792896227642881893134498151552326647933689596516859342242244584714818773791567187322217164347852843751875979415198165627534263527828414549217234322361937785185174993256753483876378332521824515977173397535784236923629636713469151526399149548322849831431526219478653861754364155275865511643923249858589466142474763778413826829226663398467569555747267195129525138917561785436449855933951538973995881954521124753369223898312843734771532342383282987422334196585128526526324291777689689492346231786335851551413876834969878")

DayOnePartTwo.process("1212")
DayOnePartTwo.process("1221")
DayOnePartTwo.process("123425")
DayOnePartTwo.process("123123")
DayOnePartTwo.process("12131415")
#DayOnePartTwo.process("892195969991735837915273868729548694237967495115412399373194562526947585337233793568278265279199883197167634791293177986152566236718332617536487236879747167999983363832257912445756887314879229925864477761357139855548522513798899853896612387146687716264599943289416326727256525173953861534244979466587895429399159924916364476319573895566795393368411672387263615582128377676293612892723762237191146714286233543514411813323197995953854871628225358543514157867372265718724276911699514971458844849349726276329135118243155698271218844347387457343656446381799296893222256198484465873714311777937421161581798189554141474236239447612421883232173914183732126332838194648583472419154369952477422666389517569944428464617457124369349242479612422673241361777576466946622932243728551273284837934497511114334421486262244982914734452113946361245377351849815584855691778894798219822463298387771923329337634394654439458564233259451453345316753241438267739439225497515276522424441532462541528195782818326918562247278496495764435386667383577543385186827269732261223156824351164841648424564925198783625721396988984481558391866483955533972212164693898955412719161648411279149413443192896864258215498543827458438871355879336892721675937111952479183496982825163456282747678364612135596373533447719867384667516572262124225585623974278833981365494628646614588114147473559138853453189448624976774641922469183942857695986376428944876851497914443873513862319484181787593572987444669767939526294424531262999564948571142342741129862311311313166798363442745792896227642881893134498151552326647933689596516859342242244584714818773791567187322217164347852843751875979415198165627534263527828414549217234322361937785185174993256753483876378332521824515977173397535784236923629636713469151526399149548322849831431526219478653861754364155275865511643923249858589466142474763778413826829226663398467569555747267195129525138917561785436449855933951538973995881954521124753369223898312843734771532342383282987422334196585128526526324291777689689492346231786335851551413876834969878")
